<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>/jank/{{.Board.Name}}/</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter&display=swap" />
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
        header {
            background-color: #343a40;
            color: #fff;
            padding: 15px 20px;
            text-align: center;
        }
        .container {
            width: 90%;
            max-width: 800px;
            margin: 20px auto;
            background-color: #fff;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .board-title {
            font-size: 1.8em;
            margin-bottom: 5px;
            color: #343a40;
        }
        .board-meta {
            color: #6c757d;
            margin-bottom: 20px;
        }
        .auth-bar {
            text-align: right;
            margin-bottom: 15px;
            color: #6c757d;
            font-size: 0.9em;
        }
        .threads {
            list-style-type: none;
            padding: 0;
        }
        .thread {
            border-bottom: 1px solid #ddd;
            padding: 15px 0;
        }
        .thread:last-child {
            border-bottom: none;
        }
        .thread-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        .thread-title {
            font-weight: bold;
            color: #343a40;
        }
        .thread-date {
            color: #6c757d;
            font-size: 0.9em;
        }
        .thread-author {
            color: #6c757d;
            font-size: 0.9em;
        }
        footer {
            text-align: center;
            margin-top: 40px;
            color: #6c757d;
        }
        a {
            color: #007bff;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        @media (max-width: 600px) {
            .thread-header {
                flex-direction: column;
                align-items: flex-start;
            }
            .thread-date {
                margin-top: 5px;
            }
        }
        .mtg-card {
            font-weight: bold;
            font-weight: 600;
            color: #d9534f; /* Example color for card names */
        }
    </style>
</head>
<body>
    <header>
        <h1>/jank{{.Board.Name}}</h1>
    </header>

    <div class="container">
        <div class="auth-bar">
            <a href="/">Home</a> 路
            <a href="/user">Profiles</a> 路
            {{if .IsAuthenticated}}
                User: <a href="/profile">{{.Username}}</a> 路 <a href="/logout?next={{.CurrentPath | urlquery}}">Log out</a>
            {{else}}
                <a href="/login?next={{.CurrentPath | urlquery}}">Log in</a> 路
                <a href="/signup?next={{.CurrentPath | urlquery}}">Sign up</a>
            {{end}}
        </div>
        <div class="board-title">{{.Board.Name}} (Board #{{.Board.ID}})</div>
        <div class="board-meta">{{.Board.Description}}</div>

        {{if .IsAuthenticated}}
            <a href="/view/board/newthread/{{.Board.ID}}">Create a new thread</a>
        {{else}}
            <a href="/login?next={{.CurrentPath | urlquery}}">Log in to create a new thread</a>
        {{end}}

        <h2>Threads</h2>
        {{if .Board.Threads}}
            <ul class="threads">
            {{range .Board.Threads}}
                <li class="thread">
                    <div class="thread-header">
                        <div class="thread-title"><a href="/view/thread/{{.ID}}">Thread #{{.ID}}: {{.Title}}</a></div>
                        <div class="thread-date">Created: {{.Created.Format "Jan 2, 2006 at 3:04pm"}}</div>
                    </div>
                    {{if .Author}}
                        <div class="thread-author">Started by <a href="/user/{{.Author | urlquery}}">{{.Author}}</a></div>
                    {{end}}
                </li>
            {{end}}
            </ul>
        {{else}}
            <p>No threads yet. Be the first to create one!</p>
            {{if .IsAuthenticated}}
                <p><a href="/view/board/newthread/{{.Board.ID}}">Start a new thread</a></p>
            {{else}}
                <p><a href="/login?next={{.CurrentPath | urlquery}}">Log in to start a thread</a></p>
            {{end}}
        {{end}}

        <footer>
            <p><a href="/">Back to Home</a></p>
        </footer>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const threadTitles = document.querySelectorAll('.thread-title a');
            const boardTitle = document.querySelector('.board-title');
            const boardMeta = document.querySelector('.board-meta');
            const cardNamePattern = /\[\[([^\]]+)\]\]/g;

            threadTitles.forEach(title => {
                title.innerHTML = title.innerHTML.replace(cardNamePattern, '<span class="mtg-card">[[ $1 ]]</span>');
            });

            if (boardTitle) {
                boardTitle.innerHTML = boardTitle.innerHTML.replace(cardNamePattern, '<span class="mtg-card">[[ $1 ]]</span>');
            }

            if (boardMeta) {
                boardMeta.innerHTML = boardMeta.innerHTML.replace(cardNamePattern, '<span class="mtg-card">[[ $1 ]]</span>');
            }
        });
    </script>
</body>
</html>
